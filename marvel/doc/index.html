<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>开发文档</title>
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/monokai-sublime.min.css">
	
	<style type="text/css">
		html{font-family: sans-serif;}
		.doc-wrap{
			max-width: 800px;
			margin: 0 auto;
			overflow: hidden;
		}
		h2{ position: relative; }
		h2::before{ content: "\1F648";position: absolute;left: -1.75rem; top:50%; -webkit-transform: translateY(-50%) }
		pre {overflow: auto;-webkit-overflow-scrolling:touch;}
		pre code {
			font: normal 14px Consolas, Monaco, monospace;
		}
		img {max-width: 100%}
	</style>
</head>
<body>
	<div class="doc-wrap">
		<h1 id="marvel-">Marvel开发说明</h1>
<h2 id="-">开发目录</h2>
<pre><code class="lang-perl">
  src/                            开发目录
    scss/                        sass源文件
        lib/                    基础框架目录
            base.scss           核心框架文件 包括各个模块的集合
            _sassCore.scss      项目sass maxin方法集合
            _var.scss           变量声明文件
            _reset.scss         清零文件
            _common.scss         通用元素
            _layout.scss        布局方式
            _alert.scss          提示信息
            _animation.scss     动画
            _bottombar.scss     底导
            _bubble.scss         提示气泡
            _button.scss         按钮
            _dialog.scss         会话框
            _fonticon.scss      字体图标
            _form.scss          表单
            _icon.scss          图片图标
            _loading.scss       加载中
            _panel.scss         面板
            _pop.scss           弹出提示
            _popup.scss         弹出选择层
            _tab.scss           切换栏
            _tabbar.scss        操作栏
            _tips.scss          提示条
            base.scss           模块集合
            …
            _xxx.scss           拆分模块源文件
        card/                   card组件源文件
            cardN.scss          单个card组件sass
            …
            cards.scss          所有card组件sass集合
        mod/                    其他组件源文件
            mod_xxx.scss        单个组件sass文件
            …
            mods.scss           所有组件sass文件
    font/                       存放生成字体图标所需svg
        uxxxx-x.svg             根据Unicode码以及对应字符命名规范命名的svg图
        …
    svg/                        存放svg图片 可用于合成svg sprite
        xxx.svg                 svg文件名将用于合成svg sprite代码内的id
        …
    img/                        存放项目所需图片
        xxx.png                 单个图文件
</code></pre>
<h2 id="-">单位标准</h2>
<p>Marvel 统一使用 rem 作为 CSS 单位，在必要的时候搭配 <code>em</code> 以及 <code>px</code>。通常在边框为了实现 Hairline 效果，使用 px 作为单位。em 在制作大小可变控件中使用。</p>
<h2 id="rem-em-">rem、em单位的转化</h2>
<p>使用 sass 函数方法 <code>P2R(Npx)</code> 在sass编译时会将 <code>px</code> 自动转化为 <code>rem</code> 单位，使用 P2M(Npx) 可以转化为<code>em</code>单位。相关函数方法参见<code>_var.scss</code> 源码。</p>
<h2 id="-">基础变量的定义</h2>
<p>在 <code>_var.scss</code> 文件中 定义系统全局类名前缀、文件路径、文字颜色、字号、颜色等变量。</p>
<h2 id="-">样式的清零</h2>
<p>基于 Eric Meyer&#39;s Reset CSS v2.0</p>
<h2 id="-">样式私有前缀</h2>
<p>配置了 gulp-autoprefixer 插件，sass 源文件中只需要写 W3C 标准属性即可。</p>
<h2 id="-">框架私有前缀</h2>
<p>Marvel 为了保证较好的独立性，不被侵染，使用 <code>m-</code> 前缀作为类名前缀。在 <code>_var.scss</code> 全局变量声明中定义了复合前缀：</p>
<ul>
<li>字体图标 : <code>m-font</code></li>
<li>SVG图标：<code>m-icon</code></li>
<li>按钮：<code>m-btn</code></li>
<li>动画：<code>m-an</code></li>
</ul>
<h2 id="-">基准字号</h2>
<p>Marvel的基准字号是 <strong>16px</strong>。</p>
<h2 id="-">字体字号</h2>
<p>在_var.scss中 规范了 <code>$f10</code>、<code>$f11</code>、<code>$f12</code> ...等常用字号。在定义字号（font-size）时，统一使用<code>$f10</code>，这样有字号变更需求时能较快定位到代码需改位置。</p>
<h2 id="hairline-retina-1px-border-">Hairline(Retina 1px Border)处理</h2>
<h3 id="-">普通细边处理方案 可以适配圆角边线 安卓无细边</h3>
<p>Marvel 只兼容 iOS8 及以上系统的原生细边效果。低版本 iOS 以及Android 系统目前不做支持。Marvel 采取了优雅兼容的方式，对于 @2x 屏幕使用 0.5px，@3x 屏幕使用 0.35px（ <em>注：经测试 iPhone 6 Plus由于像素缩放，并不是 1/3px</em> ）这种原生的方式来实现Hairline。border <strong>一定采用</strong> 调用mixin中的border方法生成,这种生成细边的方式推荐使用在圆形、圆角的边框元素中。</p>
<pre><code class="lang-scss">.line {
    @include border(border-top,1px,solid,#b6b6b6);
}
</code></pre>
<p>生成的 CSS 为：</p>
<pre><code class="lang-css">.line {
    border-top:1px solid #b6b6b6;
}
.iosx2 .line{
    border-top:0.5px solid #b6b6b6;
}
.iosx3 .line{
    border-top:0.35714px solid #b6b6b6;
}
</code></pre>
<p>配合 JavaScript UA 检测为对应设备屏幕根元素对应增加 <code>.iosx2</code> 或者<code>.iosx3</code> 类。</p>
<h3 id="-background-">使用background实现</h3>
<p>由于在 iPhone 6 以及 iPhone 6 Plus 机型 border 竖线渲染有时会产生变粗细不均的情况，所以独立空结构元素可以调用 mixin 中的 <code>fixborder</code> 方法生成。<code>fixborder</code>方法是使用 width height 以及 background-color 模拟边线，如不需要用 null 值代替。线的实际宽或高要写到mixin方法外。</p>
<pre><code class="lang-scss">.line {
    @include fixborder(1px,null,$bd-cl);
    height:P2R(24px);
}
</code></pre>
<p>生成的 CSS 为：</p>
<pre><code class="lang-css">.line {
    width:1px;
    background-color:rgba(0, 0, 0, 0.15);
    height:1.5rem;
}
.iosx2 .line {
    width:0.5px;
    background-color:rgba(0, 0, 0, 0.15);
    height:1.5rem;
}
.iosx3 .line {
    width:0.35714px;
    background-color:rgba(0, 0, 0, 0.15);
    height:1.5rem;
}
</code></pre>
<h3 id="-ios-android-">适配iOS Android的分割线、边框 无法适配有圆角的线框以及虚线等</h3>
<pre><code class="lang-scss">/*值对应边框宽度值上右下左以及边框颜色*/
@include line(1px,1px,1px,1px,$bd-cl);
</code></pre>
<h2 id="-">不同屏幕的适配</h2>
<p>Marvel 针对414及以上分辨率屏幕放大1.06倍、768以上分辨率屏幕放大1.25倍。在<code>_var.scss</code>中进行了定义。</p>
<h2 id="-">布局方式</h2>
<p>Marvel 并没有一套完整的栅格系统。仅提供了flex table布局、对齐方式的基础方法。以及简单的针对m-item-box m-auto-box使用的栅格</p>
<h2 id="-m-item-box-m-auto-box-m-img-box-m-avatar-box-">盒子 m-item-box | m-auto-box | m-img-box | m-avatar-box 的用法</h2>
<ul>
<li><p>m-item-box</p>
<blockquote>
<p>见于 card17 或 card19 内使用的盒子模型，自带右边线以及下边线。使用 mixin 中的 itembox 方法可以快速生成此类盒子模型。注意 m-item-box 中 font-size 为0，内元素需要定义字号。</p>
</blockquote>
</li>
<li><p>m-auto-box</p>
<blockquote>
<p>用于 card52 内使用的盒子模型 主要用于自适应盒子</p>
</blockquote>
<p>  使用m-auto-box创建适配屏幕宽度均分的盒子：</p>
</li>
</ul>
<pre><code class="lang-HTML">&lt;!--m-col-n n为1-10 --&gt;
&lt;div class=&quot;grid m-col-4&quot;&gt;
    &lt;div class=&quot;m-auto-list&quot;&gt;
        &lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;&lt;div class=&quot;m-auto-box&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="lang-scss">/*valueA:容器上下内间距,valueB:容器左右内间距,valueC:容器列间距,valueD:容器行间距。*/
.grid {
    @include col(valueA,valueB,valueC,valueD);
}
</code></pre>
<p>得到：</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArwAAADiCAMAAACbf+TfAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////zMzMOOqqgwAAAutJREFUeNrs2MENADAIAzGy/9KMwDvCmeCE/GlnzMzMzMzMzMzMzMzMzMzs11Ixqc9TA69UeJ1ZKrxESIVXKrzOLBVeIqTCS4RUeKXC68xS4SVCKrxS4XVmqfASIRVeIqTCKxVeZ5YKLxFS4ZUKrzNLhdeZpcJLhFR4pcLrzFLhJUIqvFLhdWap8DqzVHiJkAqvVHidWSq8REiFVyq88EqF15mlwkuEVHilwuvMUuElQiq8UuGFVyq8ziwVXiKkwisVXmeWCi8RUuGVCi+8UuF1ZqnwEiEVXqnwOrNUeImQCi8RUuGVCq8zS4WXCKnwSoXXmaXCS4RUeImQCq9UeJ1ZKrxESIVXKrzOLBVeIqTCS4RUeKXC68xS4SVCKrxS4XVmqfA6s1R4iZAKr1R4nVkqvERIhVcqvM4sFV5nlgovEVLhlQqvM0uFlwip8EqFF16p8DqzVHiJkAqvVHidWSq8REiFVyq88EqF15mlwkuEVHilwuvMUuElQiq8UuE1MzMzMzOzmnkXS/VV5sxS4SVCKrxS4XVmqfASIRVeqfA6s1R4nVkqvERIhVcqvM4sFV4ipMIrFV54pcLrzFLhJUIqvFLhdWap8BIhFV6p8MIrFV5nlgovEVLhlQqvM0uFlwip8BIBL7xS4XVmqfASIRVeqfA6s1R4iZAKLxFS4ZUKrzNLhZcIqfBKhdeZpcJLhFR4iZAKr1R4nVkqvERIhVcqvM4sFV5nlgovEVLhlQqvM0uFlwip8EqF15mlwuvMUuElQiq8UuF1ZqnwEiEVXqnwwisVXmeWCi8RUuGVCq8zS4WXCKnwSoUXXqnwOrNUeImQCq9UeJ1ZKrxESIVXKrzwSoXXmaXCS4RUeKXC68xS4SVCKrxEwAuvVHidWSq8REiFVyq8ziwVXiKkwkuEVHilwuvMUuElQiq8UuF1ZqnwEiEVXiKkwisVXmeWCi8RUuGVCq8zS+3Ea2ZmZmZmZmZmZmZmZmbnVgABBgAWHgenh1uE4AAAAABJRU5ErkJggg==" alt="grid"></p>
<ul>
<li><p>m-img-box</p>
<blockquote>
<p>用于 card 内承载图片的盒子模型 如 card26、card28 等等</p>
</blockquote>
<p>  m-img-box 使用了 object-fit 属性来控制接口图片元素展示尺寸。m-img-box内图片是宽高100%显示，宽高继承父级元素。</p>
<p>  自适应容器中m-img-box请使用 m-imghold-square(块图) m-imghold-wide(16:9) 来进行图形占位,详见card59。</p>
</li>
</ul>
<pre><code class="lang-HTML">    &lt;div class=&quot;m-img-box m-imghold-square&quot;&gt;
        &lt;img src=&quot;&quot;&gt; 
    &lt;/div&gt;
    &lt;div class=&quot;m-img-box m-imghold-wide&quot;&gt;
        &lt;img src=&quot;&quot;&gt; 
    &lt;/div&gt;
</code></pre>
<ul>
<li><p>m-avatar-box</p>
<blockquote>
<p>用于需要用户圆头像的 card，如 card30 等。在父容器增加 <code>m-avatar-box</code> 类，图片会变为圆形，可在 <code>m-img-box</code> 内增加V标对应dom，便可正常显示。</p>
</blockquote>
</li>
</ul>
<h2 id="-">文本截字</h2>
<p>在 _common.scss 中提供了两个常用截字类 <code>m-text-cut</code> <code>m-text-cut-2</code> ，分别是一行截字和两行截字。如果需要多行截字，可以单独使用sass方法</p>
<pre><code>.cut {
    @include cutword(3);
}
</code></pre><h2 id="-">字体图标</h2>
<p>新增一个字体图标需要在 font 文件夹内保存图标 svg 并以 <strong>u加(4位unicode码)-对应类名后缀.svg</strong>命名，unicode码E000 至 F8FF，可参照<a href="http://unicode-table.com/en/#low-surrogates">unicode对照表</a>。可以目前目录内文件作为样例，运行<code>gulp font</code>命令即可生成不同格式的字体文件。</p>
<p>字体图标调用在 <code>_fonticon.scss</code>，新增一个以 <code>.#{$front-icon-font}-</code>作为前缀的类，后面补充字符图标的名称，在before伪元素内使用unicode码引用对应字体图标。gulp css编译sass，对应图标类生效。</p>
<h2 id="-">图片图标</h2>
<p>新增一个图片图标需要在 svg 文件夹内保存图标 svg 并按照文件顺序命名，可以目前目录内文件作为样例，运行 <code>gulp svg</code> 命令即可生成拼合的 svg sprite 文件。</p>
<p>图片图标调用在 _icon.scss ，在22行 <code>sprite:</code> 后面追加新的图标类名，gulp css编译sass，对应图标类生效。生成的图片图标是标准尺寸。图片图标是使用em作为单位，所以使用rem控制整个图标的大小。如赞图标</p>
<p>赞图标（小）</p>
<pre><code class="lang-html">&lt;i class=&quot;m-icon m-icon-liked&quot;&gt;&lt;/i&gt;&lt;/code&gt;
</code></pre>
<p>赞图标（大）</p>
<pre><code class="lang-html">&lt;i class=&quot;m-icon m-icon-liked m-icon-large&quot;&gt;&lt;/i&gt;
</code></pre>
<p>图标尺寸</p>
<p>图标在不同场景可能会使用到不同大小尺寸。新增一个图标大小尺寸，须在<code>$sizes:</code>后对应增加：类名 系数。如想得到18px尺寸图标：#{$imageIcon}-warn 18px。</p>
<p>很多场景需要我们在一个模块单独控制一个图标的大小，因为适配需要，这时候可以使用<code>@include icsize(n);</code>混合。如card28中的icon尺寸16px，对应代码：</p>
<pre><code class="lang-scss">.card28{
    .#{$imageIcon}{
        @include icsize(16px);
    }
}
</code></pre>
<h2 id="-">表单元素</h2>
<p>Marvel重新定义了部分表单元素 包括滑动、复选框、单选框、数字选择框、搜索、文本栏、选择框、文本框。如需增加请在 _form.scss 内增加。表单元素亦使用 em 作为单位，方便使用 rem 控制表单元素的大小。</p>
<h2 id="-">按钮</h2>
<ul>
<li>普通按钮</li>
</ul>
<p>使用 <code>.#{$button}(.m-btn)</code> 作为基础类。如果新增一种带颜色按钮那么在 <code>$btn-types:</code> 内依照
<code>按钮名称 文字色 背景色 边框大小 边框颜色 激活色 激活边框</code>
几个值的顺序添加，编译sass之后即新增一种普通类型按钮。在DOM中增加 <code>ontouchstart=&quot;&quot;</code> 可触发 active 状态。按钮有 a 与 button 两种引用方式。</p>
<pre><code class="lang-html">&lt;a href=&quot;javascript:;&quot; class=&quot;m-btn m-btn-orange&quot; ontouchstart=&quot;&quot;&gt;橙按钮&lt;/a&gt;;
&lt;a href=&quot;javascript:;&quot; class=&quot;m-btn m-btn-orange m-btn-disabled&quot; ontouchstart=&quot;&quot;&gt;橙按钮不可用&lt;/a&gt;
</code></pre>
<pre><code class="lang-html">&lt;button class=&quot;m-btn m-btn-orange&quot; ontouchstart=&quot;&quot;&gt;橙按钮&lt;/button&gt;
&lt;button class=&quot;m-btn m-btn-orange&quot; ontouchstart=&quot;&quot; disabled&gt;橙按钮不可用&lt;/button&gt;
</code></pre>
<p>增加<code>.#{$button}-text-#{$type}</code>类 如（m-btn-text-orange）可得到白底彩字按钮。增加按钮文字颜色需在 <code>$white-types:</code> 内增加新的类型。</p>
<pre><code class="lang-html">&lt;a href=&quot;javascript:;&quot; class=&quot;m-btn m-btn-white m-btn-text-orange&quot; ontouchstart=&quot;&quot;&gt;白底橙字按钮&lt;/a&gt;
</code></pre>
<ul>
<li>通栏按钮</li>
</ul>
<p>通过增加 <code>.#{$button}-block</code> （.m-btn-block）来实现。</p>
<pre><code class="lang-html">&lt;a href=&quot;javascript:;&quot; class=&quot;m-btn m-btn-orange&quot; ontouchstart=&quot;&quot;&gt;橙按钮&lt;/a&gt;
&lt;a href=&quot;javascript:;&quot; class=&quot;m-btn m-btn-orange m-btn-block&quot; ontouchstart=&quot;&quot;&gt;橙按钮不可用&lt;/a&gt;
</code></pre>
<ul>
<li>圆按钮</li>
</ul>
<p>使用 <code>.#{$button}-round</code>（.m-btn-round）作为基础类。搭配颜色类实现不同效果，一般圆按钮内部都会搭配字符图标使用。</p>
<ul>
<li>自定义按钮</li>
</ul>
<p>是指图文混排形式的按钮。Maverl 提供了横竖两种自定义按钮的模板，统一结构方便模板渲染。可通过外层 <code>m-btn-box</code> 与 <code>m-ctrl-box</code>进行控制，亦可使用 <code>.m-box-dir</code> 类来改变 flex 的布局方式。</p>
<pre><code class="lang-html">&lt;!--竖按钮--&gt;
&lt;div class=&quot;m-btn-box&quot;&gt;
        &lt;div class=&quot;m-diy-btn m-box-col m-box-center m-box-center-a&quot;&gt;
            &lt;img src=&quot;http://u1.sinaimg.cn/upload/2014/01/15/card_icon_comment_default.png&quot;&gt;
            &lt;h4&gt;点评&lt;/h4&gt;
        &lt;/div&gt;
&lt;/div&gt;
&lt;!--横按钮--&gt;
&lt;div class=&quot;m-ctrl-box&quot;&gt;
        &lt;div class=&quot;m-diy-btn m-box-col m-box-center m-box-center-a&quot;&gt;
            &lt;img src=&quot;http://u1.sinaimg.cn/upload/2014/01/15/card_icon_comment_default.png&quot;&gt;
            &lt;h4&gt;点评&lt;/h4&gt;
        &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h2 id="tips-">Tips提示条</h2>
<p>使用 <code>.m-tips</code> 作为基础类，新增一种颜色的 tip 需要在 <code>$tip-types:</code> 内增加新的类型。</p>
<pre><code class="lang-html">&lt;a class=&quot;m-tips m-tips-yellow&quot;&gt;提示信息&lt;/a&gt;
</code></pre>
<h2 id="loading">Loading</h2>
<p>Loading 使用 CSS3 动画，但是由于帧动画效率不高，在低端机器可能表现不佳，可以酌情引用。一共用两种颜色，分别是
浅色 <code>.m-loading-light</code>、深色调用 <code>.m-loading-dark</code>。</p>
<h2 id="-">其他说明</h2>
<p>在 lib 文件夹内，提供了所有基础样式。如需增加请新增或修改其中的文件。card 是基于 lib 提供组件建立起的模块体系。</p>
<h2 id="-">卡片点击的激活状态</h2>
<p>为了卡片中元素的激活状态的正常显示，我们要保证active的元素背景显示正常，激活状态增加m-active时，要求背景显示正常</p>
<h2 id="-">卡片组合</h2>
<p>卡片组合提供三种形态 ctype-1 ctype-2 ctype-3 详见card11。ctype-1类型:带有间距的卡片分割线；ctype-2:通栏卡片分割线；ctype-3:无分割线，可自定义分割线 可参考card82 。</p>

	</div>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/languages/scss.min.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>